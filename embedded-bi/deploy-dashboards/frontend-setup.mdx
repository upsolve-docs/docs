---
title: "Frontend Setup"
description: "Set up frontend for dashboard deployment"
icon: "computer-mouse"
---

There are two ways to deploy dashboard in your front end:

1. iFrame Embedding
2. Native React Component Embedding ðŸ”’

<Tabs>
  <Tab title="iFrame Embedding">

  Please click on the Deploy button in the Hub.
 <Frame>

  <img
  className="block dark:hidden"
  src="/images/build-your-first-dashboard/light/deploy.png"
  alt="Hero Light"
/>
<img
  className="hidden dark:block"
  src="/images/build-your-first-dashboard/dark/deploy-dark.png"
  alt="Hero Dark"
/>
 </Frame>

 You will need to get the JWT for the current user and the dashboard ID to render the correct dashboard. The JWT is generated by following the steps in Backend Setup. The dashboard ID could be found in the URL when you are viewing the dashboard you want to embed.

Below is an example of deploying component with JWT  usingÂ [**Clerk middleware**](https://clerk.com/docs/references/nextjs/auth-middleware#use-after-auth-for-fine-grained-control):

```javascript
"use client";
import React from "react";
import { useUser } from "@clerk/nextjs";

const Analytics: React.FC = () => {
  // Get the user information from Clerk and extract the Upsolve token from the metadata
  const { user } = useUser();
  const upsolveToken = user?.publicMetadata?.["upsolveToken"];

  // Embed the component into your app
  return (
    <>
      {upsolveToken != null && typeof upsolveToken === "string" && (
        <iframe
          id="c5da5cb3-fedb-4656-9170-0cc65c9db29a"
          title="Example Dashboard"
          width="1000"
          height="1000"
          src="https://hub.upsolve.ai/share/dashboard/c5da5cb3-fedb-4656-9170-0cc65c9db29a?theme=light&jwt=<upsolveToken>"
        />
      )}
    </>
  );
};

export default Analytics;
```

<AccordionGroup>
  <Accordion title="Supabase Setup ðŸ”’">
    For Supabase-specific setups, you need to include a database auth token (`dbAuthToken`) in the iFrame `src` URL. This token is used to authenticate users and identify what RLS policies should apply to the given user.

    Example updated iFrame URL:
    ```javascript
    <iframe
      id="c5da5cb3-fedb-4656-9170-0cc65c9db29a"
      title="Example Dashboard"
      width="1000"
      height="1000"
      src="https://hub.upsolve.ai/share/dashboard/c5da5cb3-fedb-4656-9170-0cc65c9db29a?theme=light&jwt=<upsolveToken>&dbAuthToken=<yourDbAuthToken>"
    />
    ```

    - **dbAuthToken**: This token is the auth token you get from Supabase session retrieval.

    ### Retrieving the Session Token
    To retrieve the session token (`dbAuthToken`), you can use Supabase's `auth.getSession` method. Below is an example:

    ```javascript
    import { createClient } from '@supabase/supabase-js';

    const supabase = createClient(
      'https://your-supabase-project.supabase.co', // Replace with your Supabase project URL
      'public-anon-key' // Replace with your Supabase anon key
    );

    async function getDbAuthToken() {
      const {
        data: { session },
        error,
      } = await supabase.auth.getSession();

      if (error) {
        console.error('Error retrieving session:', error.message);
        return null;
      }

      // Return the access token from the session
      return session?.access_token;
    }

    getDbAuthToken().then((dbAuthToken) => {
      console.log('dbAuthToken:', dbAuthToken);
      // Use dbAuthToken in the iframe URL
    });
    ```
    Refer to the [Supabase API docs](https://supabase.com/docs/reference/javascript/auth-getsession) for more details on managing sessions and tokens.
  </Accordion>
</AccordionGroup>


  </Tab>
  <Tab title="Native React Component Embedding ðŸ”’">
    <Steps>
      <Step title="Import Upsolve AI SDK">
        Ask the Upsolve AI team for _"a key to the private NPM library"_. Use the key in your `.npmrc` or `.yarnrc` file. You can then import the SDK into your application.
        Use the key as follows:
        <AccordionGroup>
          <Accordion title="If you are using `npm` or `yarn v1`">
            Add your key to your `.npmrc`. **DO NOT COMMIT** this file (more details [here](https://docs.npmjs.com/using-private-packages-in-a-ci-cd-workflow#create-and-check-in-a-project-specific-npmrc-file)):
            ```txt .npmrc
            @upsolve-labs:registry=https://npm.pkg.github.com/
            //npm.pkg.github.com/:_authToken={YOUR_UPSOLVE_TOKEN}
            ```
          </Accordion>

          <Accordion title="If you are using `yarn v2+`">
            Add your key to your `.yarnrc.yml`. **DO NOT COMMIT** this file (more details [here](https://yarnpkg.com/configuration/yarnrc)):
            ```yml .yarnrc.yml
            nodeLinker: node-modules

            # Use the correct yarn path here based on your version
            yarnPath: .yarn/releases/yarn-4.1.0.cjs

            npmScopes:
              upsolve-labs:
                npmRegistryServer: "https://npm.pkg.github.com/"
                npmAuthToken: "{YOUR_UPSOLVE_TOKEN}"
            ```
          </Accordion>
        </AccordionGroup>

        Now you may run `npm i @upsolve-labs/sdk` or `yarn add @upsolve-labs/sdk` to install the SDK.

      </Step>
      <Step title="Deploy Dashboard - Tailwind Setup">
        If you don't already have Tailwind installed, please follow the setup instructions [here](https://tailwindcss.com/docs/installation). In your `tailwind.config.js` you will need to make 2 changes:

        ```javascript tailwind.config.js
        module.exports = {
          content: [
            ...
            "./node_modules/@tremor/**/*.{js,ts,jsx,tsx}",
            "./node_modules/@upsolve-labs/**/*.{js,ts,jsx,tsx}",
            "./node_modules/flowbite-react/lib/esm/**/*.{js,ts,jsx,tsx}",
          ],
          ...
          presets: [require("@upsolve-labs/sdk/tailwind.config.js")],
        };
        ```

        And make sure, [per the instructions](https://tailwindcss.com/docs/installation), that in your `root.tsx` file you have imported `./output.css` with the `output.css` file you generated in step 4 of the Tailwind setup.

      </Step>
      <Step title="Deploy Dashboard - Configure global CSS">
        In your main `layout.tsx` or `page.tsx`, add this line to import the Upsolve CSS. For example, if you have a `RootLayout` it will look like this:

        ```typescript layout.tsx
        "use client";
        ...
        import '@upsolve-labs/common/styles/global.css';
        ...

        export default function RootLayout({
          children,
        }:
        ...
        ```
      </Step>
      <Step title="Deploy Dashboard - Deploy component with JWT">
        You will need to get the JWT for the current user and the dashboard ID to render the correct dashboard. The JWT is generated by following the steps in [Backend Setup](/deploy-dashboards/backend-setup).
        The dashboard ID could be found in the URL when you are viewing the dashboard you want to embed.
        
        Below is an example of deploying component with JWT using [Clerk middleware](https://clerk.com/docs/references/nextjs/auth-middleware#use-after-auth-for-fine-grained-control):

        ```typescript Analytics.tsx
        "use client";
        import React from "react";
        import { UpsolveDashboard } from "@upsolve-labs/sdk";
        import { useUser } from "@clerk/nextjs";

        const Analytics: React.FC = () => {
          // Get the user information from Clerk and extract the Upsolve token from the metadata
          const { user } = useUser();
          const upsolveToken = user?.publicMetadata?.["upsolveToken"];

          // Embed the component into your app
          return (
            <>
              {upsolveToken != null && typeof upsolveToken === "string" && (
                <UpsolveDashboard
                  dashboardId={"4cc12f51-1db4-474c-ac14-ba7574ed4ff3"}
                  tenantJWT={upsolveToken}
                />
              )}
            </>
          );
        };

        export default Analytics;
        ```

<AccordionGroup>
  <Accordion title="Supabase Setup ðŸ”’">
    <AccordionGroup>
      <Accordion title="Overview">
        You will need both the JWT (tenant-specific) and the `dbAuthToken` to render the correct dashboard. 
        - **JWT**: The JWT is generated by following the steps in [Backend Setup](/deploy-dashboards/backend-setup).
        - **dbAuthToken**: Retrieved from Supabase and is used to authenticate the user and apply RLS policies. 
        - **Dashboard ID**: The dashboard ID can be found in the URL when you are viewing the dashboard you want to embed.
      </Accordion>

      <Accordion title="Using Clerk Middleware and Supabase">
        Below is an example of deploying a component with both the `upsolveToken` (JWT) and the `dbAuthToken`:

        ```typescript Analytics.tsx
        "use client";
        import React from "react";
        import { UpsolveDashboard } from "@upsolve-labs/sdk";
        import { createClient } from '@supabase/supabase-js';
        import { useUser } from "@clerk/nextjs";

        const supabase = createClient(
          'https://your-supabase-project.supabase.co', // Replace with your Supabase project URL
          'public-anon-key' // Replace with your Supabase anon key
        );

        const Analytics: React.FC = () => {
          const [dbAuthToken, setDbAuthToken] = React.useState<string | null>(null);
          const { user } = useUser();
          const upsolveToken = user?.publicMetadata?.["upsolveToken"]; // Extract the JWT from user metadata

          React.useEffect(() => {
            const fetchAuthToken = async () => {
              const {
                data: { session },
                error,
              } = await supabase.auth.getSession();

              if (error) {
                console.error('Error retrieving Supabase session:', error.message);
                return;
              }

              setDbAuthToken(session?.access_token || null); // Set the dbAuthToken
            };

            fetchAuthToken();
          }, []);

          // Embed the component into your app
          return (
            <>
              {dbAuthToken && upsolveToken && (
                <UpsolveDashboard
                  dashboardId={"4cc12f51-1db4-474c-ac14-ba7574ed4ff3"}
                  tenantJWT={upsolveToken}
                  dbAuthToken={dbAuthToken}
                />
              )}
            </>
          );
        };

        export default Analytics;
        ```
      </Accordion>

      <Accordion title="Key Points">
        - **JWT (`upsolveToken`)**: This is tenant-specific and retrieved from Clerk using the `useUser` hook.
        - **dbAuthToken**: This is retrieved from Supabase using the `auth.getSession` method and is used to enforce RLS policies.
        - **Dashboard ID**: This is required to specify which dashboard to render. It can be found in the URL of the dashboard.
        - Ensure both tokens are securely fetched and handled, especially in production environments.
      </Accordion>

      <Accordion title="Additional Resources">
        - [Supabase API documentation](https://supabase.com/docs/reference/javascript/auth-getsession) for managing sessions.
        - [Clerk middleware documentation](https://clerk.com/docs/references/nextjs/auth-middleware) for handling authentication.
      </Accordion>
    </AccordionGroup>
  </Accordion>
</AccordionGroup>



        
        

      </Step>


      <Step title="Deploy Dashboard - Deploy to Production">
        Make sure that your `.npmrc` or `.yarnrc.yml` values are provided to your deployment as env variables, otherwise the deployment will not work.
      </Step>
    </Steps>
    <Note>
For enterprise features, look for the ðŸ”’ symbol. These features are available in our Enterprise plan. Please contact us for more information.
</Note>
  </Tab>
</Tabs>